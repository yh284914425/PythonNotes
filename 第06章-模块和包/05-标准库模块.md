# 05-æ ‡å‡†åº“æ¨¡å—

## ğŸ“š Pythonæ ‡å‡†åº“æ¦‚è¿°

Pythonæ ‡å‡†åº“æ˜¯Pythonå®‰è£…æ—¶è‡ªå¸¦çš„æ¨¡å—é›†åˆï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ¶µç›–äº†æ–‡ä»¶æ“ä½œã€ç½‘ç»œç¼–ç¨‹ã€æ•°æ®å¤„ç†ã€ç³»ç»Ÿç®¡ç†ç­‰å„ä¸ªæ–¹é¢ã€‚æŒæ¡æ ‡å‡†åº“å¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚

## ğŸ”§ ç³»ç»Ÿå’Œè¿è¡Œæ—¶æ¨¡å—

### 1. sysæ¨¡å— - ç³»ç»Ÿç›¸å…³åŠŸèƒ½
```python
import sys

# Pythonç‰ˆæœ¬ä¿¡æ¯
print(f"Pythonç‰ˆæœ¬: {sys.version}")
print(f"ç‰ˆæœ¬ä¿¡æ¯: {sys.version_info}")

# å‘½ä»¤è¡Œå‚æ•°
print(f"è„šæœ¬å: {sys.argv[0]}")
print(f"å‚æ•°åˆ—è¡¨: {sys.argv[1:]}")

# æ¨¡å—æœç´¢è·¯å¾„
print("æ¨¡å—æœç´¢è·¯å¾„:")
for path in sys.path[:3]:
    print(f"  {path}")

# ç³»ç»Ÿå¹³å°
print(f"å¹³å°: {sys.platform}")

# é€€å‡ºç¨‹åº
# sys.exit(0)  # æ­£å¸¸é€€å‡º
# sys.exit("é”™è¯¯ä¿¡æ¯")  # å¸¦é”™è¯¯ä¿¡æ¯é€€å‡º
```

### 2. osæ¨¡å— - æ“ä½œç³»ç»Ÿæ¥å£
```python
import os

# å½“å‰å·¥ä½œç›®å½•
print(f"å½“å‰ç›®å½•: {os.getcwd()}")

# æ”¹å˜å·¥ä½œç›®å½•
# os.chdir('/path/to/directory')

# åˆ—å‡ºç›®å½•å†…å®¹
files = os.listdir('.')
print(f"å½“å‰ç›®å½•æ–‡ä»¶: {files[:5]}")  # æ˜¾ç¤ºå‰5ä¸ª

# ç¯å¢ƒå˜é‡
print(f"PATH: {os.environ.get('PATH', 'æœªè®¾ç½®')[:50]}...")
print(f"HOME: {os.environ.get('HOME', os.environ.get('USERPROFILE'))}")

# è·¯å¾„æ“ä½œ
path = os.path.join('folder', 'subfolder', 'file.txt')
print(f"æ‹¼æ¥è·¯å¾„: {path}")
print(f"ç›®å½•å: {os.path.dirname(path)}")
print(f"æ–‡ä»¶å: {os.path.basename(path)}")
print(f"æ–‡ä»¶å­˜åœ¨: {os.path.exists('README.md')}")

# åˆ›å»ºå’Œåˆ é™¤ç›®å½•
# os.makedirs('new_folder/subfolder', exist_ok=True)
# os.rmdir('empty_folder')  # åªèƒ½åˆ é™¤ç©ºç›®å½•
```

### 3. platformæ¨¡å— - å¹³å°ä¿¡æ¯
```python
import platform

print(f"ç³»ç»Ÿ: {platform.system()}")           # Windows, Linux, Darwin
print(f"ç‰ˆæœ¬: {platform.release()}")          # ç³»ç»Ÿç‰ˆæœ¬
print(f"æ¶æ„: {platform.machine()}")          # x86_64, AMD64
print(f"å¤„ç†å™¨: {platform.processor()}")      # å¤„ç†å™¨ä¿¡æ¯
print(f"Pythonå®ç°: {platform.python_implementation()}")  # CPython
print(f"è¯¦ç»†ä¿¡æ¯: {platform.platform()}")     # å®Œæ•´å¹³å°ä¿¡æ¯
```

## ğŸ“… æ—¥æœŸå’Œæ—¶é—´æ¨¡å—

### 1. datetimeæ¨¡å— - æ—¥æœŸæ—¶é—´å¤„ç†
```python
from datetime import datetime, date, time, timedelta

# å½“å‰æ—¶é—´
now = datetime.now()
print(f"å½“å‰æ—¶é—´: {now}")
print(f"ä»Šå¤©æ—¥æœŸ: {date.today()}")

# åˆ›å»ºç‰¹å®šæ—¶é—´
birthday = datetime(1990, 5, 15, 14, 30, 0)
print(f"ç”Ÿæ—¥: {birthday}")

# æ—¶é—´æ ¼å¼åŒ–
print(f"æ ¼å¼åŒ–æ—¶é—´: {now.strftime('%Y-%m-%d %H:%M:%S')}")
print(f"ä¸­æ–‡æ ¼å¼: {now.strftime('%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†')}")

# æ—¶é—´è®¡ç®—
tomorrow = now + timedelta(days=1)
last_week = now - timedelta(weeks=1)
print(f"æ˜å¤©: {tomorrow.date()}")
print(f"ä¸Šå‘¨: {last_week.date()}")

# è§£ææ—¶é—´å­—ç¬¦ä¸²
time_str = "2024-01-15 10:30:00"
parsed_time = datetime.strptime(time_str, "%Y-%m-%d %H:%M:%S")
print(f"è§£ææ—¶é—´: {parsed_time}")
```

### 2. timeæ¨¡å— - æ—¶é—´ç›¸å…³åŠŸèƒ½
```python
import time

# æ—¶é—´æˆ³
timestamp = time.time()
print(f"å½“å‰æ—¶é—´æˆ³: {timestamp}")

# æ ¼å¼åŒ–æ—¶é—´
formatted = time.strftime("%Y-%m-%d %H:%M:%S")
print(f"æ ¼å¼åŒ–æ—¶é—´: {formatted}")

# ç¡çœ 
print("å¼€å§‹ç­‰å¾…...")
time.sleep(1)  # ç­‰å¾…1ç§’
print("ç­‰å¾…ç»“æŸ")

# æ€§èƒ½æµ‹é‡
start_time = time.perf_counter()
# æ‰§è¡Œä¸€äº›æ“ä½œ
sum(range(1000000))
end_time = time.perf_counter()
print(f"æ‰§è¡Œæ—¶é—´: {end_time - start_time:.4f}ç§’")
```

## ğŸ”¢ æ•°å­¦å’Œéšæœºæ¨¡å—

### 1. mathæ¨¡å— - æ•°å­¦å‡½æ•°
```python
import math

# å¸¸é‡
print(f"Ï€ = {math.pi}")
print(f"e = {math.e}")

# åŸºæœ¬å‡½æ•°
print(f"âˆš16 = {math.sqrt(16)}")
print(f"2Â³ = {math.pow(2, 3)}")
print(f"logâ‚â‚€(100) = {math.log10(100)}")
print(f"sin(Ï€/2) = {math.sin(math.pi/2)}")

# å–æ•´å‡½æ•°
print(f"å‘ä¸Šå–æ•´ 3.2: {math.ceil(3.2)}")
print(f"å‘ä¸‹å–æ•´ 3.8: {math.floor(3.8)}")
print(f"æˆªæ–­ 3.8: {math.trunc(3.8)}")

# å…¶ä»–å‡½æ•°
print(f"ç»å¯¹å€¼ |-5|: {math.fabs(-5)}")
print(f"é˜¶ä¹˜ 5!: {math.factorial(5)}")
print(f"æœ€å¤§å…¬çº¦æ•° gcd(48,18): {math.gcd(48, 18)}")
```

### 2. randomæ¨¡å— - éšæœºæ•°ç”Ÿæˆ
```python
import random

# éšæœºæ•´æ•°
print(f"1-10éšæœºæ•´æ•°: {random.randint(1, 10)}")
print(f"0-99éšæœºæ•´æ•°: {random.randrange(0, 100, 2)}")  # å¶æ•°

# éšæœºæµ®ç‚¹æ•°
print(f"0-1éšæœºæµ®ç‚¹æ•°: {random.random()}")
print(f"1-10éšæœºæµ®ç‚¹æ•°: {random.uniform(1, 10)}")

# éšæœºé€‰æ‹©
colors = ['çº¢', 'ç»¿', 'è“', 'é»„', 'ç´«']
print(f"éšæœºé¢œè‰²: {random.choice(colors)}")
print(f"éšæœºé€‰æ‹©3ä¸ª: {random.sample(colors, 3)}")

# æ‰“ä¹±åˆ—è¡¨
numbers = list(range(1, 11))
random.shuffle(numbers)
print(f"æ‰“ä¹±å: {numbers}")

# è®¾ç½®éšæœºç§å­ï¼ˆç”¨äºå¯é‡ç°çš„éšæœºæ•°ï¼‰
random.seed(42)
print(f"å›ºå®šç§å­éšæœºæ•°: {random.randint(1, 100)}")
```

## ğŸ“„ æ–‡ä»¶å’Œæ•°æ®å¤„ç†æ¨¡å—

### 1. jsonæ¨¡å— - JSONæ•°æ®å¤„ç†
```python
import json

# Pythonå¯¹è±¡è½¬JSON
data = {
    'name': 'å¼ ä¸‰',
    'age': 25,
    'skills': ['Python', 'JavaScript', 'SQL'],
    'is_student': False
}

# è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²
json_str = json.dumps(data, ensure_ascii=False, indent=2)
print("JSONå­—ç¬¦ä¸²:")
print(json_str)

# JSONå­—ç¬¦ä¸²è½¬Pythonå¯¹è±¡
parsed_data = json.loads(json_str)
print(f"è§£æåçš„æ•°æ®: {parsed_data}")

# æ–‡ä»¶æ“ä½œ
# å†™å…¥JSONæ–‡ä»¶
with open('data.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

# è¯»å–JSONæ–‡ä»¶
with open('data.json', 'r', encoding='utf-8') as f:
    loaded_data = json.load(f)
    print(f"ä»æ–‡ä»¶åŠ è½½: {loaded_data}")
```

### 2. csvæ¨¡å— - CSVæ–‡ä»¶å¤„ç†
```python
import csv

# å†™å…¥CSVæ–‡ä»¶
data = [
    ['å§“å', 'å¹´é¾„', 'åŸå¸‚'],
    ['å¼ ä¸‰', 25, 'åŒ—äº¬'],
    ['æå››', 30, 'ä¸Šæµ·'],
    ['ç‹äº”', 28, 'å¹¿å·']
]

with open('people.csv', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f)
    writer.writerows(data)

# è¯»å–CSVæ–‡ä»¶
with open('people.csv', 'r', encoding='utf-8') as f:
    reader = csv.reader(f)
    for row in reader:
        print(row)

# ä½¿ç”¨å­—å…¸æ–¹å¼å¤„ç†CSV
with open('people.csv', 'r', encoding='utf-8') as f:
    reader = csv.DictReader(f)
    for row in reader:
        print(f"{row['å§“å']} - {row['å¹´é¾„']}å² - {row['åŸå¸‚']}")
```

### 3. pathlibæ¨¡å— - ç°ä»£è·¯å¾„æ“ä½œ
```python
from pathlib import Path

# åˆ›å»ºè·¯å¾„å¯¹è±¡
p = Path('my_folder/my_file.txt')
print(f"è·¯å¾„: {p}")
print(f"çˆ¶ç›®å½•: {p.parent}")
print(f"æ–‡ä»¶å: {p.name}")
print(f"æ–‡ä»¶ä¸»å: {p.stem}")
print(f"æ‰©å±•å: {p.suffix}")

# è·¯å¾„æ‹¼æ¥
new_path = Path('documents') / 'projects' / 'python' / 'main.py'
print(f"æ‹¼æ¥è·¯å¾„: {new_path}")

# è·¯å¾„æ£€æŸ¥
current_file = Path(__file__) if '__file__' in globals() else Path('.')
print(f"å½“å‰æ–‡ä»¶å­˜åœ¨: {current_file.exists()}")
print(f"æ˜¯æ–‡ä»¶: {current_file.is_file()}")
print(f"æ˜¯ç›®å½•: {current_file.is_dir()}")

# éå†ç›®å½•
current_dir = Path('.')
for item in current_dir.iterdir():
    if item.is_file():
        print(f"æ–‡ä»¶: {item.name}")
```

## ğŸŒ ç½‘ç»œå’Œäº’è”ç½‘æ¨¡å—

### 1. urllibæ¨¡å— - URLå¤„ç†
```python
from urllib.parse import urlparse, urljoin, quote, unquote
from urllib.request import urlopen

# URLè§£æ
url = "https://www.example.com/path/page?query=value&lang=zh#section"
parsed = urlparse(url)
print(f"åè®®: {parsed.scheme}")
print(f"åŸŸå: {parsed.netloc}")
print(f"è·¯å¾„: {parsed.path}")
print(f"æŸ¥è¯¢: {parsed.query}")
print(f"ç‰‡æ®µ: {parsed.fragment}")

# URLæ‹¼æ¥
base_url = "https://api.example.com/"
full_url = urljoin(base_url, "users/123")
print(f"å®Œæ•´URL: {full_url}")

# URLç¼–ç 
text = "ä½ å¥½ ä¸–ç•Œ"
encoded = quote(text)
decoded = unquote(encoded)
print(f"ç¼–ç : {encoded}")
print(f"è§£ç : {decoded}")
```

### 2. http.clientæ¨¡å— - HTTPå®¢æˆ·ç«¯
```python
import http.client
import json

# åˆ›å»ºHTTPSè¿æ¥
conn = http.client.HTTPSConnection("httpbin.org")

# å‘é€GETè¯·æ±‚
conn.request("GET", "/get")
response = conn.getresponse()
print(f"çŠ¶æ€ç : {response.status}")
print(f"å“åº”å¤´: {dict(response.getheaders())}")

# è¯»å–å“åº”å†…å®¹
data = response.read().decode('utf-8')
print(f"å“åº”å†…å®¹: {json.loads(data)}")

conn.close()
```

> **æ³¨æ„ï¼š** `http.client` æ˜¯ä¸€ä¸ªç›¸å¯¹åº•å±‚çš„HTTPå®¢æˆ·ç«¯ï¼Œä½¿ç”¨èµ·æ¥è¾ƒä¸ºç¹çã€‚åœ¨å®é™…çš„å¼€å‘å·¥ä½œä¸­ï¼Œå‡ ä¹æ‰€æœ‰å¼€å‘è€…éƒ½ä¼šä½¿ç”¨æ›´é«˜çº§ã€æ›´æ˜“ç”¨çš„ç¬¬ä¸‰æ–¹åº“ `requests` æ¥å¤„ç†HTTPè¯·æ±‚ã€‚`requests` åº“æä¾›äº†æ›´ç®€æ´çš„APIã€è‡ªåŠ¨è¿æ¥ç®¡ç†ã€JSONè§£æç­‰ä¾¿åˆ©åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»ã€‚äº†è§£ `http.client` æœ‰åŠ©äºç†è§£HTTPåè®®çš„åº•å±‚å·¥ä½œæ–¹å¼ã€‚

## ğŸ”§ å®ç”¨å·¥å…·æ¨¡å—

### 1. collectionsæ¨¡å— - ç‰¹æ®Šå®¹å™¨
```python
from collections import Counter, defaultdict, namedtuple, deque

# Counter - è®¡æ•°å™¨
text = "hello world"
counter = Counter(text)
print(f"å­—ç¬¦è®¡æ•°: {counter}")
print(f"æœ€å¸¸è§çš„3ä¸ª: {counter.most_common(3)}")

# defaultdict - é»˜è®¤å­—å…¸
dd = defaultdict(list)
dd['fruits'].append('apple')
dd['fruits'].append('banana')
print(f"é»˜è®¤å­—å…¸: {dict(dd)}")

# namedtuple - å‘½åå…ƒç»„
Point = namedtuple('Point', ['x', 'y'])
p = Point(1, 2)
print(f"ç‚¹åæ ‡: x={p.x}, y={p.y}")

# deque - åŒç«¯é˜Ÿåˆ—
dq = deque([1, 2, 3])
dq.appendleft(0)  # å·¦ç«¯æ·»åŠ 
dq.append(4)      # å³ç«¯æ·»åŠ 
print(f"åŒç«¯é˜Ÿåˆ—: {list(dq)}")
```

### 2. itertoolsæ¨¡å— - è¿­ä»£å·¥å…·
```python
import itertools

# æ— é™è¿­ä»£å™¨
counter = itertools.count(1, 2)  # 1, 3, 5, 7, ...
print(f"å‰5ä¸ªå¥‡æ•°: {list(itertools.islice(counter, 5))}")

cycle = itertools.cycle(['A', 'B', 'C'])
print(f"å¾ªç¯å‰6ä¸ª: {list(itertools.islice(cycle, 6))}")

# ç»„åˆè¿­ä»£å™¨
numbers = [1, 2, 3, 4]
print(f"æ’åˆ—(2): {list(itertools.permutations(numbers, 2))}")
print(f"ç»„åˆ(2): {list(itertools.combinations(numbers, 2))}")

# åˆ†ç»„
data = [1, 1, 2, 2, 2, 3, 3]
grouped = itertools.groupby(data)
for key, group in grouped:
    print(f"é”® {key}: {list(group)}")
```

### 3. functoolsæ¨¡å— - å‡½æ•°å·¥å…·
```python
from functools import lru_cache, partial, reduce

# lru_cache - ç¼“å­˜è£…é¥°å™¨
@lru_cache(maxsize=128)
def fibonacci(n):
    if n < 2:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

print(f"æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬10é¡¹: {fibonacci(10)}")
print(f"ç¼“å­˜ä¿¡æ¯: {fibonacci.cache_info()}")

# partial - åå‡½æ•°
def multiply(x, y):
    return x * y

double = partial(multiply, 2)  # å›ºå®šç¬¬ä¸€ä¸ªå‚æ•°ä¸º2
triple = partial(multiply, 3)  # å›ºå®šç¬¬ä¸€ä¸ªå‚æ•°ä¸º3

print(f"2 * 5 = {double(5)}")
print(f"3 * 4 = {triple(4)}")

# reduce - ç´¯ç§¯è®¡ç®—
numbers = [1, 2, 3, 4, 5]
sum_result = reduce(lambda x, y: x + y, numbers)
print(f"ç´¯åŠ ç»“æœ: {sum_result}")
```

## ğŸ¯ æœ¬èŠ‚å°ç»“

- **ç³»ç»Ÿæ¨¡å—**ï¼šsysã€osã€platformæä¾›ç³»ç»Ÿçº§åŠŸèƒ½
- **æ—¶é—´æ¨¡å—**ï¼šdatetimeã€timeå¤„ç†æ—¥æœŸæ—¶é—´
- **æ•°å­¦æ¨¡å—**ï¼šmathã€randomæä¾›æ•°å­¦å’ŒéšæœºåŠŸèƒ½
- **æ–‡ä»¶æ¨¡å—**ï¼šjsonã€csvã€pathlibå¤„ç†æ–‡ä»¶å’Œæ•°æ®
- **ç½‘ç»œæ¨¡å—**ï¼šurllibã€http.clientå¤„ç†ç½‘ç»œè¯·æ±‚
- **å·¥å…·æ¨¡å—**ï¼šcollectionsã€itertoolsã€functoolsæä¾›å®ç”¨å·¥å…·

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“**ï¼šåœ¨å®‰è£…ç¬¬ä¸‰æ–¹åº“ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥æ ‡å‡†åº“æ˜¯å¦æœ‰ç›¸åº”åŠŸèƒ½
2. **æŸ¥é˜…æ–‡æ¡£**ï¼šæ ‡å‡†åº“æ–‡æ¡£è¯¦ç»†ï¼Œé‡åˆ°é—®é¢˜æ—¶å¤šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£
3. **æ€§èƒ½è€ƒè™‘**ï¼šæ ‡å‡†åº“æ¨¡å—é€šå¸¸ç»è¿‡ä¼˜åŒ–ï¼Œæ€§èƒ½è¾ƒå¥½
4. **å…¼å®¹æ€§**ï¼šæ ‡å‡†åº“éšPythonç‰ˆæœ¬æ›´æ–°ï¼Œæ³¨æ„ç‰ˆæœ¬å…¼å®¹æ€§

## ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ 
å­¦ä¹ å®Œæ ‡å‡†åº“æ¨¡å—åï¼Œæ¥ä¸‹æ¥å­¦ä¹  **[06-é«˜çº§ç‰¹æ€§.md](./06-é«˜çº§ç‰¹æ€§.md)**ï¼Œäº†è§£æ¨¡å—å’ŒåŒ…çš„é«˜çº§åŠŸèƒ½ã€‚

# 01-模块基础

## 🧩 什么是模块？

### 模块的定义
模块（Module）是包含Python代码的文件，以`.py`为扩展名。模块是Python代码组织的基本单位。

### 模块可以包含
- **函数定义** - 可重用的代码块
- **类定义** - 面向对象的代码结构
- **变量** - 模块级别的数据
- **可执行语句** - 模块加载时执行的代码

### 简单示例
```python
# 创建一个名为 greeting.py 的模块
def say_hello(name):
    """问候函数"""
    return f"Hello, {name}!"

def say_goodbye(name):
    """告别函数"""
    return f"Goodbye, {name}!"

# 模块级变量
DEFAULT_NAME = "World"

# 模块加载时执行的代码
print("greeting模块已加载")
```

## 🎯 模块的作用

### 1. 代码重用
- 避免重复编写相同的代码
- 一次编写，多处使用
- 提高开发效率

```python
# 在多个文件中使用同一个模块
import greeting

print(greeting.say_hello("Alice"))  # Hello, Alice!
print(greeting.say_hello("Bob"))    # Hello, Bob!
```

### 2. 命名空间
- 避免变量名和函数名冲突
- 每个模块都有自己的命名空间
- 通过模块名访问内部内容

```python
# math_utils.py
def add(a, b):
    return a + b

# string_utils.py  
def add(a, b):
    return a + b  # 字符串拼接

# 使用时不会冲突
import math_utils
import string_utils

result1 = math_utils.add(1, 2)      # 数字相加
result2 = string_utils.add("a", "b") # 字符串拼接
```

### 3. 代码组织
- 将相关功能组织在一起
- 使代码结构更清晰
- 便于维护和管理

```python
# 文件操作相关功能放在 file_utils.py
def read_file(filename):
    """读取文件"""
    pass

def write_file(filename, content):
    """写入文件"""
    pass

def delete_file(filename):
    """删除文件"""
    pass
```

### 4. 团队协作
- 不同开发者可以开发不同模块
- 模块间通过接口交互
- 降低代码耦合度

## 🔍 模块的类型

### 1. 内置模块
Python解释器内置的模块，用C语言编写：
```python
import sys      # 系统相关功能
import math     # 数学函数
import os       # 操作系统接口
```

### 2. 标准库模块
Python标准库提供的模块：
```python
import datetime  # 日期时间处理
import json     # JSON数据处理
import random   # 随机数生成
import re       # 正则表达式
```

### 3. 第三方模块
通过pip安装的外部模块：
```python
import requests  # HTTP请求库
import numpy    # 数值计算库
import pandas   # 数据分析库
```

### 4. 自定义模块
用户自己创建的模块：
```python
import my_utils     # 自己创建的工具模块
import config       # 配置模块
import database     # 数据库操作模块
```

## 📁 模块文件的结构

### 基本结构
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
模块的文档字符串
描述模块的功能和用途
"""

# 导入其他模块
import os
import sys
from datetime import datetime

# 模块级常量
PI = 3.14159
MAX_SIZE = 1000

# 模块级变量
_private_var = "私有变量"
public_var = "公共变量"

# 函数定义
def public_function():
    """公共函数"""
    pass

def _private_function():
    """私有函数（约定以下划线开头）"""
    pass

# 类定义
class MyClass:
    """类定义"""
    pass

# 主程序入口
if __name__ == "__main__":
    # 当模块被直接运行时执行的代码
    print("模块被直接运行")
```

### 文档字符串的重要性
```python
"""
calculator.py - 计算器模块

这个模块提供基本的数学运算功能，包括：
- 四则运算
- 幂运算
- 开方运算

作者: Python学习者
版本: 1.0.0
创建日期: 2024-01-01
"""

def add(a, b):
    """
    加法运算
    
    参数:
        a (float): 第一个数
        b (float): 第二个数
    
    返回:
        float: 两数之和
    
    示例:
        >>> add(2, 3)
        5
    """
    return a + b
```

## 🔧 模块的属性

### 特殊属性
每个模块都有一些特殊属性：

```python
# 查看模块属性
import math

print(math.__name__)    # 模块名: 'math'
print(math.__doc__)     # 模块文档字符串
print(math.__file__)    # 模块文件路径（内置模块可能没有）
print(math.__package__) # 模块所属包
```

### __name__ 属性的妙用
```python
# my_module.py
def main():
    """主函数"""
    print("这是主程序")

def helper_function():
    """辅助函数"""
    print("这是辅助函数")

# 只有当模块被直接运行时才执行main()
if __name__ == "__main__":
    main()
else:
    print(f"{__name__} 模块被导入")
```

当直接运行：`python my_module.py`
- `__name__` 的值是 `"__main__"`
- 会执行 `main()` 函数

当被导入：`import my_module`
- `__name__` 的值是 `"my_module"`
- 不会执行 `main()` 函数

## 💡 模块使用的基本原则

### 1. 单一职责原则
每个模块应该只负责一个特定的功能领域：
```python
# 好的做法
# math_utils.py - 只包含数学相关功能
# file_utils.py - 只包含文件操作功能
# string_utils.py - 只包含字符串处理功能

# 不好的做法
# utils.py - 包含所有杂七杂八的功能
```

### 2. 接口清晰
模块应该提供清晰、简单的接口：
```python
# 好的接口设计
def calculate_area(radius):
    """计算圆的面积"""
    return 3.14159 * radius ** 2

# 不好的接口设计
def calc(r, t="area"):
    """t可以是'area'或'circumference'"""
    if t == "area":
        return 3.14159 * r ** 2
    elif t == "circumference":
        return 2 * 3.14159 * r
```

### 3. 最小依赖
模块应该尽量减少对其他模块的依赖：
```python
# 好的做法 - 只导入需要的函数
from math import pi, sqrt

# 不好的做法 - 导入整个模块但只用一个函数
import math
# 只使用 math.pi
```

## 🎯 本节小结

- **模块是什么**：包含Python代码的.py文件
- **模块的作用**：代码重用、命名空间、代码组织、团队协作
- **模块类型**：内置、标准库、第三方、自定义
- **模块结构**：文档字符串、导入、常量、函数、类、主程序
- **特殊属性**：__name__、__doc__、__file__等
- **设计原则**：单一职责、接口清晰、最小依赖

## 📚 下一步学习
学习完模块基础后，接下来学习 **[02-模块导入.md](./02-模块导入.md)**，了解各种模块导入方式和技巧。
